function convertSpeed(e){var t=-1,n=["KB","MB","GB","TB","PB","EB","ZB","YB"];do{e/=1024,t++}while(e>1024);return Math.max(e,.1).toFixed(1)+" "+n[t]}function formatFileSize(e,t){var n=["Bytes","KB","MB","GB","TB"];if(0==e)return"n/a";var a=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return 0==a?e+" "+n[a]:(e/Math.pow(1024,a)).toFixed(1)+" "+n[a]}if(parsingurl=new URLSearchParams(window.location.search),page=parsingurl.get("page"),act=parsingurl.get("act"),dir=null==parsingurl.get("dir")?default_dir:parsingurl.get("dir"),type=parsingurl.get("type"),file=parsingurl.get("file"),directory=String.raw`${atob(directory)}`,$(".btn-backup").on("click",function(e){e.preventDefault();var t=$(this);if(files=[],$(".cekfiles").each(function(){!0===$(this).is(":checked")&&files.push($(this).val())}),0===files.length)return toastr.error("Belum ada file yang dipilih!","Warning"),!1;t.html('<i class="fa fa-circle-o-notch fa-spin"></i>'),$("button").attr("disabled",!0),$.post(`${baseurl}`,{backup:"",files:files},function(e){let n=JSON.parse(e);!0===n.status?window.location.reload():(toastr.error(n.pesan,"Warning"),t.html('<i class="fa fa-database"></i> Backup'),$("button").removeAttr("disabled",!0))})}),$(".click-menu").on("click",function(e){e.preventDefault();var t=$(this);$(".menus"+t.data("hash")).html('<div class="text-center"><small><i class="fa fa-circle-o-notch fa-spin"></i> Processing</small></div>'),$.post(`${baseurl}?page=list_breadcrumb`,{path:t.data("path")},function(e){$(".menus"+t.data("hash")).html(atob(e))})}),$("#showpass").on("click",function(e){!0===$(this).is(":checked")?$(".pass").attr("type","text"):$(".pass").attr("type","password")}),"setting"===page&&$("#form-setting").on("submit",function(e){e.preventDefault();var t=$(this);$.ajax({url:`${baseurl}?page=simpan`,type:"post",data:t.serializeArray(),success:function(e){window.location.reload()}})}),loadListDirectory=(()=>{$(".list_directory").html('<div class="mt-3"><div class="box"></div><div class="box"></div><div class="box"></div></div>'),$.get(`${baseurl}?page=list`,{folder:folder},function(e){$(".list_directory").html(atob(e)),window.scrollTo(0,parseInt(sessionStorage.getItem("scroll")))})}),""!==isLogin&&"edit"!==page&&"confirmation"!==page&&"add"!==page&&"setting"!==page?(window.addEventListener("scroll",e=>{let t=this.scrollY;sessionStorage.setItem("scroll",t),parseInt(t)>120?$(".floating").addClass("isfloating"):$(".floating").removeClass("isfloating")}),loadListDirectory()):window.scrollTo(0,0),"edit"===page){$(".loading").show(),$.post(`${baseurl}`,{read_file:"",file:file},function(e){$(".loading").hide(),$("#codearea").fadeIn("slow").show(),document.querySelector("#codearea").value=window.atob(window.atob(window.atob(e))),codemirrorEditor=CodeMirror.fromTextArea(document.getElementById("codearea"),{lineNumbers:!0,autoCloseBrackets:!0,matchBrackets:!0,keyMap:"sublime",theme:"material-ocean",matchBrackets:!0,mode:{name:"javascript",startOpen:!0},extraKeys:{"Alt-F":"findPersistent",F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}},indentUnit:4,indentWithTabs:!0,lineWrapping:!0,tabSize:4}),$(".CodeMirror").css({height:`${window.innerHeight-295}px`}),window.addEventListener("resize",function(e){tinggi=window.innerHeight,$(".CodeMirror").css({height:`${tinggi-295}px`})},!0)});var ask=!1;fungsi_simpan=(()=>{var e=$(".btn-simpan-file"),t=codemirrorEditor.getValue(),n=$(".path_file").val(),a=$(".path").val(),r=$("#nama_file").val(),o=$(".password").val(),i=new XMLHttpRequest;if(""===o.trim())return toastr.error("Password can't empty!","Warning"),!1;e.html('<i class="fa fa-circle-o-notch fa-spin"></i>').attr("disabled",!0),i.onload=function(){if(4==this.readyState&&200==this.status){var t=JSON.parse(this.response);1==t.status?(ask=!1,toastr.success(t.response,"Information")):toastr.error(t.response,"Warning"),e.html('<i class="fa fa-save"></i>').removeAttr("disabled")}else alert("Target server reached, but it returned an error")},i.onerror=function(){},i.open("POST",baseurl,!0),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.send("savefile=&folder="+a+"&nama_file="+r+"&path="+n+"&password="+o+"&content="+encodeURIComponent(t))}),$(window).bind("keydown",function(e){if(e.ctrlKey||e.metaKey)switch(String.fromCharCode(e.which).toLowerCase()){case"s":e.preventDefault(),fungsi_simpan()}"textarea"===e.target.localName&&(ask=!0)}),$(".btn-simpan-file").on("click",function(e){e.preventDefault(),fungsi_simpan()}),$(".btn-fullscreen").on("click",function(e){e.preventDefault(),$(".card.editor").addClass("fullscreen");var t=window.innerHeight;$(".CodeMirror").css({height:`${t-85}px`}),window.addEventListener("resize",function(e){t=window.innerHeight,$(".CodeMirror").css({height:`${t-85}px`})},!0),$(".btn-fullscreen").hide(),$(".btn-minimize").show()}),$(".btn-minimize").on("click",function(e){e.preventDefault(),$(".card.editor").removeClass("fullscreen"),$(".btn-fullscreen").show(),$(".btn-minimize").hide(),$(".CodeMirror").css({height:`${window.innerHeight-295}px`}),window.addEventListener("resize",function(e){tinggi=window.innerHeight,$(".CodeMirror").css({height:`${tinggi-295}px`})},!0)}),window.onbeforeunload=function(e){if(!0===ask)return e=e||window.event,e&&(e.returnValue="Sure?"),"Sure?"}}if("add"===page&&"file"===type){var codemirrorEditor;codemirrorEditor=CodeMirror.fromTextArea(document.getElementById("codearea"),{lineNumbers:!0,autoCloseBrackets:!0,matchBrackets:!0,keyMap:"sublime",theme:"material-ocean",matchBrackets:!0,mode:{name:"javascript",startOpen:!0},indentUnit:4,indentWithTabs:!0,lineWrapping:!0,tabSize:4,extraKeys:{"Alt-F":"findPersistent",F11:function(e){e.setOption("fullScreen",!e.getOption("fullScreen"))},Esc:function(e){e.getOption("fullScreen")&&e.setOption("fullScreen",!1)}}}),$(".CodeMirror").css({height:`${window.innerHeight-295}px`}),window.addEventListener("resize",function(e){tinggi=window.innerHeight,$(".CodeMirror").css({height:`${tinggi-295}px`})},!0);ask=!1;$(window).bind("keydown",function(e){ask=!0}),$(".btn-simpan-file").on("click",function(e){e.preventDefault();var t=new FormData(document.getElementById("form-add-file")),n=codemirrorEditor.getValue();t.append("content",n),t.append("nama_file",document.getElementById("nama_file").value.trim()),$(".btn-simpan-file").html('<i class="fa fa-circle-o-notch fa-spin"></i>').attr("disabled",!0),$.ajax({url:`${baseurl}`,type:"post",data:t,processData:!1,contentType:!1,dataType:"json",success:function(e){!0===e.status?(ask=!1,toastr.success(e.pesan,"Success"),setTimeout(()=>{window.location.href=e.redirect},1e3)):($(".btn-simpan-file").html('<i class="fa fa-save"></i>'),toastr.error(e.pesan,"Warning"))}})}),$(".btn-fullscreen").on("click",function(e){e.preventDefault(),$(".card.editor").addClass("fullscreen");var t=window.innerHeight;$(".CodeMirror").css({height:`${t-85}px`}),window.addEventListener("resize",function(e){t=window.innerHeight,$(".CodeMirror").css({height:`${t-85}px`})},!0),$(".btn-fullscreen").hide(),$(".btn-minimize").show()}),$(".btn-minimize").on("click",function(e){e.preventDefault(),$(".card.editor").removeClass("fullscreen"),$(".btn-fullscreen").show(),$(".btn-minimize").hide(),$(".CodeMirror").css({height:`${window.innerHeight-295}px`}),window.addEventListener("resize",function(e){tinggi=window.innerHeight,$(".CodeMirror").css({height:`${tinggi-295}px`})},!0)}),window.onbeforeunload=function(e){if(!0===ask)return e=e||window.event,e&&(e.returnValue="Sure?"),"Sure?"}}if("downloadbackup"===page){ask=!1;document.querySelector("#download-button").addEventListener("click",function(e){e.preventDefault();var t=$(".password").val();document.querySelector("#download-button").setAttribute("disabled","disabled"),$.post(`${baseurl}`,{downloadbackup:"",password:t},function(e){let n=JSON.parse(e);if(!0===n.status){var a=new XMLHttpRequest,r=(new Date).getTime();filename=n.filename,namefile=n.name,$(".show-download").fadeIn("slow").show(),$(".show-download a").attr("href",filename),a.addEventListener("readystatechange",function(e){if(2==a.readyState&&200==a.status)document.querySelector("#download-button").style.display="none",document.querySelector("#download-button").setAttribute("disabled","disabled"),document.querySelector("#save-file").style.display="none",document.querySelector(".showpassword").style.display="none",document.querySelector("#btn-back").style.display="none",document.querySelector(".showprogress").style.display="block";else if(3==a.readyState);else if(4==a.readyState)try{_OBJECT_URL=URL.createObjectURL(a.response),document.querySelector(".showprogress").style.display="none",document.querySelector("#save-file").setAttribute("href",_OBJECT_URL),document.querySelector("#save-file").setAttribute("download",namefile),document.querySelector("#save-file").style.display="block",document.querySelector(".progress").style.display="none",$.post(`${baseurl}`,{deletefile:"",filename:filename,password:t},function(e){}),ask=!1,document.querySelector("#btn-back").style.display="block",document.querySelector("#btn-back").addEventListener("click",function(e){window.location.reload()})}catch(e){toastr.error(e,"Warning"),document.querySelector("#btn-back").style.display="none",document.querySelector("#download-button").style.display="block",document.querySelector("#download-button").removeAttribute("disabled"),document.querySelector(".showprogress").style.display="none"}}),a.addEventListener("progress",function(e){var t=e.loaded/e.total*100,n=((new Date).getTime()-r)/1e3,a=e.loaded/n,o=a/1024;o=Math.floor(o);var i=(e.total-e.loaded)/a,l=i%60,s=i/60;l=Math.floor(l),s=Math.floor(s),ask=!0,document.querySelector(".progress-bar").style.width=t+"%",document.querySelector(".progress-bar").innerHTML=parseFloat(t).toFixed(2)+"%",document.querySelector(".progress-text").innerHTML=convertSpeed(a)+" / s<br>"+(s>0?s+" min ":"")+l+" sec remaining"}),a.responseType="blob",a.open("get",filename),a.send()}else toastr.error(n.response,"Warning"),document.querySelector("#download-button").removeAttribute("disabled")})}),window.onbeforeunload=function(e){if(!0===ask)return e=e||window.event,e&&(e.returnValue="Sure?"),"Sure?"}}if("confirmation"===page&&"download"===act){var _OBJECT_URL,filename;ask=!1;document.querySelector("#cekzip").addEventListener("click",function(e){var t=this;0==t.value?t.value=1:t.value=0}),document.querySelector("#download-button").addEventListener("click",function(e){e.preventDefault();var t=$(".password").val(),n=document.getElementById("cekzip").value,a=document.getElementById("file").value;document.querySelector("#download-button").setAttribute("disabled","disabled"),$.post(`${baseurl}`,{download:"",password:t,iszip:n,file:a},function(e){let n=JSON.parse(e);if(!0===n.status){var a=new XMLHttpRequest,r=(new Date).getTime();filename=n.filename,namefile=n.name,$(".show-download").fadeIn("slow").show(),$(".show-download a").attr("href",filename),a.addEventListener("readystatechange",function(e){if(2==a.readyState&&200==a.status)document.querySelector("#download-button").style.display="none",document.querySelector("#save-file").style.display="none",document.querySelector(".showpassword").style.display="none",document.querySelector("#btn-back").style.display="none",document.querySelector(".showprogress").style.display="block",document.querySelector("#download-button").setAttribute("disabled","disabled");else if(3==a.readyState)console.log("error");else if(4==a.readyState)try{_OBJECT_URL=URL.createObjectURL(a.response),document.querySelector(".showprogress").style.display="none",document.querySelector("#save-file").setAttribute("href",_OBJECT_URL),document.querySelector("#save-file").setAttribute("download",namefile),document.querySelector("#save-file").style.display="block",document.querySelector(".progress").style.display="none",$.post(`${baseurl}`,{deletefile:"",filename:filename,password:t},function(e){}),ask=!1,document.querySelector("#btn-back").style.display="block",document.querySelector("#btn-back").addEventListener("click",function(e){window.location.reload()})}catch(e){toastr.error(e,"Warning"),document.querySelector("#btn-back").style.display="none",document.querySelector("#download-button").style.display="block",document.querySelector("#download-button").removeAttribute("disabled"),document.querySelector(".showprogress").style.display="none"}}),a.addEventListener("progress",function(e){var t=e.loaded/e.total*100,n=((new Date).getTime()-r)/1e3,a=e.loaded/n,o=a/1024;o=Math.floor(o);var i=(e.total-e.loaded)/a,l=i%60,s=i/60;l=Math.floor(l),s=Math.floor(s),ask=!0,document.querySelector(".progress-bar").style.width=t+"%",document.querySelector(".progress-bar").innerHTML=parseFloat(t).toFixed(2)+"%",document.querySelector(".progress-text").innerHTML=convertSpeed(a)+" / s<br>"+(s>0?s+" min ":"")+l+" sec remaining"}),a.responseType="blob",a.open("get",filename),a.send()}else toastr.error(n.response,"Warning"),document.querySelector("#download-button").removeAttribute("disabled")})}),window.onbeforeunload=function(e){if(!0===ask)return e=e||window.event,e&&(e.returnValue="Sure?"),"Sure?"}}if("add"===page&&"upload"===type){function hideSub(){$("#deleteZip").prop("checked",!1),$("#sub").hasClass("hidden")?$("#sub").removeClass("hidden"):$("#sub").addClass("hidden")}function checkOptions(e){if($("#extractZip").is(":checked")){if($("#deleteZip").is(":checked"))t='{"fileName":"'+e+'","deleteXpo":"true"}';else var t='{"fileName":"'+e+'"}';document.querySelector("#submit-btn").innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i> Proses Ekstrak',document.querySelector("#submit-btn").setAttribute("disabled","disabled"),$.ajax({url:baseurl,data:{unzip:"",path:path,Xpo:t},method:"POST",success:function(e){e=JSON.parse(e),"success"==e.unzip?toastr.success("Finished"):toastr.error("Uploaded But error occured while extracting","Warning"),document.querySelector("#submit-btn").innerHTML="Upload",document.querySelector("#submit-btn").removeAttribute("disabled")},error:function(e){toastr.error("Failed"),document.querySelector("#submit-btn").innerHTML="Upload",document.querySelector("#submit-btn").removeAttribute("disabled")}})}else toastr.success("Finished"),document.querySelector("#submit-btn").innerHTML="Upload",document.querySelector("#submit-btn").removeAttribute("disabled")}path=document.querySelector(".path").value,$(function(){$(document).on("change",":file",function(){var e=$(this),t=e.get(0).files?e.get(0).files.length:1,n=e.val().replace(/\\/g,"/").replace(/.*\//,"");e.trigger("fileselect",[t,n])}),$(document).ready(function(){$(":file").on("fileselect",function(e,t,n){var a=$(this).parents(".input-group").find(":text"),r=t>1?t+" files selected":n;a.length?a.val(r):r&&alert(r)})})}),function(){function e(){var e=document.createElement("input");return e.setAttribute("type","file"),"object"==typeof e.files}function t(e){return document.getElementById(e)}var n,a;if(e()){var r=524288,o=[];function l(e){var t=Math.ceil(e.size/r);return t}function s(e){var t=e.files;d(t,0,t.length)}function d(e,t,a){if(t>=a)return n.reset(),o=[],!1;var i=o["data-start"];void 0===i&&(i=0),i>0&&i++;for(var l=0,s=0;s<i;s++){l=l+r;l>e[t].size&&(l=e[t].size)}document.querySelector("#submit-btn").innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i> Proses Upload',document.querySelector("#submit-btn").setAttribute("disabled","disabled"),u(e[t],i,l,o["data-end"],o["data-size"],function(){t++,d(e,t,a)})}window.onload=function(){n=t("formUpload");var e=document.querySelector(".formUpload-file");for(i in e)if("object"==typeof e&&"file"==e.getAttribute("type")){var r=e;break}n.reset(),n.onsubmit=function(e){e.preventDefault(),s(r,this)},r.onchange=function(e){var t=e.target?e.target:e.srcElement,n=t.files;for(var r in n)if("object"==typeof n[r]){var i=!1,s=document.querySelector(".formUpload-file");if(s.setAttribute("data-name",n[r].name),s.setAttribute("data-end",l(n[r])),"function"==typeof s.getAttribute){a=s.getAttribute("data-name"),Data_name=a;var d=l(n[r]);if(a==n[r].name&&d==s.getAttribute("data-end")){var c={"data-start":s.getAttribute("data-start"),"data-end":s.getAttribute("data-end"),"data-size":n[r].size};o=c,i=!0}}if(!1===i){c={"data-start":0,"data-end":l(n[r]),"data-size":0};o=c}}}};var c=function(e,t){var n,a=window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder;if(void 0!==a){var r=new a;r.append(e),n=r.getBlob()}else n=new Blob([e]);var o=new FileReader;o.onload=function(e){var n=e.target?e.target:e.srcElement;t(n.result)},o.readAsArrayBuffer(n)};function u(e,n,o,i,l,s){if(void 0!==e){void 0===n&&(console.log("index:: "+n),n=0,console.log("index:: "+n));var d=o+r;d>e.size&&(d=e.size),m(e,o,d,function(r){var c=new FileReader,m=!0;c.onload=function(c){for(var f=c.target?c.target:c.srcElement,p="",b=new Uint8Array(f.result),g=b.byteLength,h=0;h<g;h++)p+=String.fromCharCode(b[h]);var v=md5(p);p=void 0;var y=new XMLHttpRequest;y.onreadystatechange=function(){if(4==y.readyState){console.log(y.response);var r=JSON.parse(y.response);if(void 0!==typeof r.response&&!0!==r.response)return toastr.error(r.response,"Warning"),!1;if(void 0!==typeof r.error&&"E_HASH"===r.error)window.setTimeout(function(){u(e,n,o,i,l,s)},1e3);else{t("progress-bar");document.querySelector("#progress-bar").style.display="flex",document.querySelector(".progress-bar").style.width=parseInt(r.percent)+"%",document.querySelector(".progress-bar").innerHTML=parseInt(r.percent)+"%",document.querySelector(".info_size").innerHTML=`<span>File : ${r.filename}<br>Terupload ${formatFileSize(r.upload_size)} dari ${formatFileSize(r.total_size)}</span>`,window.onbeforeunload=function(e){if(!0===m)return e=e||window.event,e&&(e.returnValue="Sure?"),"Sure?"},100===r.percent&&(console.log("Finished"),m=!1,hideSub(),checkOptions(a)),n++,n<i?window.setTimeout(function(){u(e,n,d,i,l,s)},100):s()}}},void 0!==n&&null!=n||(console.log("index:: "+n),n=0,console.log("index:: "+n)),y.open("post",baseurl+"?page=upload",!0),y.setRequestHeader("X-File-Name",e.name),y.setRequestHeader("X-Index",n),y.setRequestHeader("X-Total",i),y.setRequestHeader("X-Hash",v),y.setRequestHeader("X-Path",path),y.setRequestHeader("X-Size",l),y.send(r)},c.readAsArrayBuffer(r)})}else console.log("stop")}function m(e,t,n,a){var r;r=e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice(t,n),e.webkitSlice?c(r,function(e){a(e)}):a(r)}}else window.onload=function(){n=t("formUpload");document.querySelector(".formUpload-file");n.reset(),n.onsubmit=function(e){var t=document.createElement("img");t.setAttribute("src","loading.gif"),t.setAttribute("alt","loading"),this.appendChild(t)},file_input.onchange=function(e){var t="File selected";if(void 0!==typeof e){e.preventDefault();var n=e.target?e.target:e.srcElement;t=n.value||"File selected"}for(var a=document.getElementById("toupload"),r=a.getElementsByTagName("ul")[0];r.hasChildNodes();)r.removeChild(r.firstChild);var o=document.createElement("li");o.appendChild(document.createTextNode(t)),r.appendChild(o)}}}()}var Modal;$("#login").on("submit",function(e){e.preventDefault();var t=$(this),n=$(this).find("button").text(),a=$(this).find("button");a.html(`<i class="fa fa-circle-o-notch fa-spin"></i> ${n}`).attr("disabled",!0),$.ajax({url:`${baseurl}`,type:"post",data:t.serializeArray(),dataType:"json",success:function(e){!0===e.status?(toastr.success(e.pesan,"Success"),setTimeout(()=>{window.location.reload()},1e3)):(toastr.error(e.pesan,"Warning"),a.html(`${n}`).removeAttr("disabled"))}})}),btnActionSimpan=(()=>{$("button.btn-simpan").on("click",function(e){e.preventDefault();var t=$("form"),n=$(this).text(),a=$(this);$(".modal-footer").find("button").attr("disabled",!0),a.html(`<i class="fa fa-circle-o-notch fa-spin"></i> ${n}`),$.ajax({url:`${baseurl}`,type:"post",data:t.serializeArray(),dataType:"json",success:function(e){!0===e.status?(toastr.success(e.pesan,"Success"),setTimeout(()=>{Modal.close(),loadListDirectory()},1e3)):(toastr.error(e.pesan,"Warning"),a.html(n),$(".modal-footer").find("button").removeAttr("disabled",!0))},error:function(){toastr.error("Something wrong!","Warning"),a.html(n),$(".modal-footer").find("button").removeAttr("disabled",!0)}})})}),btnUbahFolder=(e=>{name=e.getAttribute("data-name"),dir=e.getAttribute("data-dir"),Modal.create("Ubah Folder","modal-md"),Modal.html(`\n        <form>\n            <input type="hidden" name="edit_folder">\n            <input type="hidden" name="folder" value="${dir}">\n            <div class="form-group">\n                <label>Folder</label>\n                <input type="text" class="form-control" name="nama_folder" value="${name}"/>\n            </div>\n            <div class="form-group">\n                <label>Password</label>\n                <input type="password" class="form-control" name="password"/>\n            </div>\n        </form>\n    `),btnActionSimpan()}),btnHapusFolder=(e=>{name=e.getAttribute("data-name"),dir=e.getAttribute("data-dir"),Modal.create("Hapus Folder","modal-md"),Modal.html(`\n        <form>\n            <input type="hidden" name="delete_folder">\n            <input type="hidden" name="folder" value="${dir}">\n            <div class="alert alert-warning">Anda yakin ingin menghapus folder <strong>${name}</strong> secara permanen?</div>\n            <div class="form-group">\n                <label>Password</label>\n                <input type="password" class="form-control" name="password"/>\n            </div>\n        </form>\n    `),btnActionSimpan()}),btnSalinFolder=(e=>{name=e.getAttribute("data-name"),dir=e.getAttribute("data-dir"),Modal.create("Salin Folder","modal-md"),Modal.html(`\n        <form>\n            <input type="hidden" name="salin_folder">\n            <input type="hidden" name="folder" value="${dir}">\n            <div class="alert alert-warning">Folder : <strong>${name}</strong></div>\n            <div class="form-group">\n                <label>Target</label>\n                <input type="text" class="form-control" name="target_folder" value="${name}"/>\n            </div>\n            <div class="form-group">\n                <label>Password</label>\n                <input type="password" class="form-control" name="password"/>\n            </div>\n        </form>\n    `),btnActionSimpan()}),btnPindahFolder=(e=>{name=e.getAttribute("data-name"),dir=e.getAttribute("data-dir"),Modal.create("Pindah Folder","modal-md"),Modal.html(`\n        <form>\n            <input type="hidden" name="pindah_folder">\n            <input type="hidden" name="folder" value="${dir}">\n            <div class="alert alert-warning">Folder : <strong>${name}</strong></div>\n            <div class="form-group">\n                <label>Target</label>\n                <input type="text" class="form-control" name="target_folder" value="${name}"/>\n            </div>\n            <div class="form-group">\n                <label>Password</label>\n                <input type="password" class="form-control" name="password"/>\n            </div>\n        </form>\n    `),btnActionSimpan()}),btnUbahFile=(e=>{name=e.getAttribute("data-name"),dir=e.getAttribute("data-dir"),file=e.getAttribute("data-file"),Modal.create("Ubah File","modal-md"),Modal.html(`\n        <form>\n            <input type="hidden" name="edit">\n            <input type="hidden" name="path_file" value="${file}">\n            <input type="hidden" name="folder" value="${dir}">\n            <div class="form-group">\n                <label>File</label>\n                <input type="text" class="form-control" name="nama_file" value="${name}"/>\n            </div>\n            <div class="form-group">\n                <label>Password</label>\n                <input type="password" class="form-control" name="password"/>\n            </div>\n        </form>\n    `),btnActionSimpan()}),btnHapusFile=(e=>{name=e.getAttribute("data-name"),dir=e.getAttribute("data-dir"),file=e.getAttribute("data-file"),Modal.create("Hapus File","modal-md"),Modal.html(`\n        <form>\n            <input type="hidden" name="delete">\n            <input type="hidden" name="path_file" value="${file}">\n            <div class="alert alert-warning">Anda yakin ingin menghapus file <strong>${name}</strong> secara permanen?</div>\n            <div class="form-group">\n                <label>Password</label>\n                <input type="password" class="form-control" name="password"/>\n            </div>\n        </form>\n    `),btnActionSimpan()}),btnSalinFile=(e=>{name=e.getAttribute("data-name"),dir=e.getAttribute("data-dir"),file=e.getAttribute("data-file"),Modal.create("Salin File","modal-md"),Modal.html(`\n        <form>\n            <input type="hidden" name="copy">\n            <input type="hidden" name="path_file" value="${file}">\n            <div class="alert alert-warning">File : <strong>${name}</strong></div>\n            <div class="form-group">\n                <label>Target</label>\n                <input type="text" class="form-control" name="target_folder" value="${directory}"/>\n            </div>\n            <div class="form-group">\n                <label>Password</label>\n                <input type="password" class="form-control" name="password"/>\n            </div>\n        </form>\n    `),btnActionSimpan()}),btnPindahFile=(e=>{name=e.getAttribute("data-name"),dir=e.getAttribute("data-dir"),file=e.getAttribute("data-file"),Modal.create("Pindah File","modal-md"),Modal.html(`\n        <form>\n            <input type="hidden" name="move">\n            <input type="hidden" name="path_file" value="${file}">\n            <div class="alert alert-warning">File : <strong>${name}</strong></div>\n            <div class="form-group">\n                <label>Target</label>\n                <input type="text" class="form-control" name="target_folder" value="${directory}"/>\n            </div>\n            <div class="form-group">\n                <label>Password</label>\n                <input type="password" class="form-control" name="password"/>\n            </div>\n        </form>\n    `),btnActionSimpan()}),btnEkstrakFile=(e=>{name=e.getAttribute("data-name"),dir=e.getAttribute("data-dir"),file=e.getAttribute("data-file"),Modal.create("Ekstrak File","modal-md"),Modal.html(`\n        <form>\n            <input type="hidden" name="ekstrak">\n            <input type="hidden" name="files" value="${file}">\n            <div class="alert alert-warning">File : <strong>${name}</strong></div>\n            <div class="form-group">\n                <label>Target</label>\n                <input type="text" class="form-control" name="target_folder" value="${directory}"/>\n            </div>\n            <div class="form-group">\n                <label>Password</label>\n                <input type="password" class="form-control" name="password"/>\n            </div>\n        </form>\n    `),btnActionSimpan()}),$(".btn-copy").on("click",function(e){if(e.preventDefault(),files=[],files_hash=[],$(".cekfiles").each(function(){!0===$(this).is(":checked")&&(files.push($(this).val()),files_hash.push($(this).data("hash")))}),0===files.length)return toastr.error("Belum ada file yang dipilih!","Warning"),!1;list_folder="",list_folder+="<strong>List folder : </strong>",list_folder+='<ul class="mb-0">',files.forEach(e=>{list_folder+=`<li>${e}</li>`}),list_folder+="</ul>",Modal.create("Salin Folder","modal-md"),Modal.html(`\n        <form>\n            <input type="hidden" name="copy_masal">\n            <input type="hidden" name="files" value="${files_hash.join("@")}">\n            <div class="form-group">\n                <div class="alert alert-warning">\n                    ${list_folder}\n                </div>\n            </div>\n            <div class="form-group">\n                <label>Target</label>\n                <input type="text" class="form-control" name="target_folder" value="${directory}"/>\n            </div>\n            <div class="form-group">\n                <label>Password</label>\n                <input type="password" class="form-control" name="password"/>\n            </div>\n        </form>\n    `),btnActionSimpan()}),$(".btn-move").on("click",function(e){return e.preventDefault(),files=[],$(".cekfiles").each(function(){!0===$(this).is(":checked")&&files.push($(this).val())}),0===files.length?(toastr.error("Belum ada file yang dipilih!","Warning"),!1):(e.preventDefault(),files=[],files_hash=[],$(".cekfiles").each(function(){!0===$(this).is(":checked")&&(files.push($(this).val()),files_hash.push($(this).data("hash")))}),0===files.length?(toastr.error("Belum ada file yang dipilih!","Warning"),!1):(list_folder="",list_folder+="<strong>List folder : </strong>",list_folder+='<ul class="mb-0">',files.forEach(e=>{list_folder+=`<li>${e}</li>`}),list_folder+="</ul>",Modal.create("Pindah Folder","modal-md"),Modal.html(`\n        <form>\n            <input type="hidden" name="pindah_masal">\n            <input type="hidden" name="files" value="${files_hash.join("@")}">\n            <div class="form-group">\n                <div class="alert alert-warning">\n                    ${list_folder}\n                </div>\n            </div>\n            <div class="form-group">\n                <label>Target</label>\n                <input type="text" class="form-control" name="target_folder" value="${directory}"/>\n            </div>\n            <div class="form-group">\n                <label>Password</label>\n                <input type="password" class="form-control" name="password"/>\n            </div>\n        </form>\n    `),void btnActionSimpan()))}),Modal=window.Modal||{},Modal.create=function(e,t="modal-lg",n=""){var a=`<div class="modal fade fadeIn" id="modal" data-keyboard="false" data-backdrop="static">\n                    <div class="modal-dialog  ${t}">\n                        <div class="modal-content">\n                            <div class="modal-header  ${n}">\n                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"> <i class="fa fa-close fa-1x"></i> </button>\n                                <strong class="modal-title" id="myModalLabel"> ${e} </strong>\n                            </div>\n                            <div id="modal-data" class="modal-body"></div>\n                            <div class="modal-footer">\n                                <button type="button" data-dismiss="modal" class="btn btn-danger btn-sm">Cancel</button>\n                                <button type="button" class="btn btn-primary btn-sm btn-simpan">Submit</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>`;$("body").append(a),$("#modal").modal("show"),$("#modal-data").html('<div style="text-align:center">Sedang memuat...</div>')},Modal.html=(e=>{$("#modal-data").html(e)}),Modal.close=(()=>{$(".modal-body").html(""),$("#modal").modal("hide"),$(".modal-backdrop").remove()}),$("body").on("hidden.bs.modal",function(){$("#modal").remove()});