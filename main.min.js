function convertSpeed(fileSizeInBytes){var i=-1,byteUnits=["KB","MB","GB","TB","PB","EB","ZB","YB"];do{fileSizeInBytes/=1024,i++}while(fileSizeInBytes>1024);return Math.max(fileSizeInBytes,.1).toFixed(1)+" "+byteUnits[i]}function formatFileSize(bytes,decimalPoint){var sizes=["Bytes","KB","MB","GB","TB"];if(0==bytes)return"n/a";var i=parseInt(Math.floor(Math.log(bytes)/Math.log(1024)));return 0==i?bytes+" "+sizes[i]:(bytes/Math.pow(1024,i)).toFixed(1)+" "+sizes[i]}if(parsingurl=new URLSearchParams(window.location.search),page=parsingurl.get("page"),act=parsingurl.get("act"),dir=null==parsingurl.get("dir")?default_dir:parsingurl.get("dir"),type=parsingurl.get("type"),file=parsingurl.get("file"),directory=String.raw`${atob(directory)}`,isLogin&&(loadBreadcrumb=()=>{$(".showBreadcrumb").html('<div class="mt-3"><div class="box"></div></div></div>'),$.post(`${baseurl}?page=breadcrumb`,{folder:folder,dir:dir,file:file,page:page},(function(result){$(".showBreadcrumb").fadeIn("slow").html(atob(result))}))},clickBreadcrumb=btn=>{var hash=btn.getAttribute("data-hash"),path=btn.getAttribute("data-path");$(".menus"+hash).html('<div class="text-center"><small><i class="fa fa-circle-o-notch fa-spin"></i> Processing</small></div>'),$.post(`${baseurl}?page=list_breadcrumb`,{path:path},(function(res){$(".menus"+hash).html(atob(res))}))},loadBreadcrumb()),$(".btn-backup").on("click",(function(e){e.preventDefault();var btn=$(this);if(files=[],$(".cekfiles").each((function(){!0===$(this).is(":checked")&&files.push($(this).data("hash"))})),0===files.length)return toastr.error("Belum ada file yang dipilih!","Warning"),!1;btn.html('<i class="fa fa-circle-o-notch fa-spin"></i>'),$("button").attr("disabled",!0),$.ajax({url:baseurl,type:"post",data:{backup:"",files:files},success:function(res){let parse=JSON.parse(res);!0===parse.status?window.location.reload():(toastr.error(parse.pesan,"Warning"),btn.html('<i class="fa fa-archive"></i>'),$("button").removeAttr("disabled",!0))},error:function(){toastr.error("Something wrong!","Warning"),btn.html('<i class="fa fa-archive"></i>'),$("button").removeAttr("disabled",!0)}})})),$("#showpass").on("click",(function(e){!0===$(this).is(":checked")?$(".pass").attr("type","text"):$(".pass").attr("type","password")})),"setting"===page&&$("#form-setting").on("submit",(function(e){e.preventDefault();var data=$(this);$.ajax({url:`${baseurl}?page=simpan`,type:"post",data:data.serializeArray(),success:function(res){window.location.reload()}})})),loadListDirectory=()=>{$(".list_directory").html('<div class="mt-3"><div class="box"></div><div class="box"></div><div class="box"></div></div>'),$.get(`${baseurl}?page=list`,{folder:folder},(function(data){$(".list_directory").html(atob(data)),window.scrollTo(0,parseInt(sessionStorage.getItem("scroll")))}))},""!==isLogin&&"edit"!==page&&"confirmation"!==page&&"add"!==page&&"setting"!==page?(window.addEventListener("scroll",event=>{let scroll=this.scrollY;sessionStorage.setItem("scroll",scroll),parseInt(scroll)>120?$(".floating").addClass("isfloating"):$(".floating").removeClass("isfloating")}),loadListDirectory()):window.scrollTo(0,0),"edit"===page){var codemirrorEditor;$(".loading").show(),$.post(`${baseurl}`,{read_file:"",file:file},(function(html){$(".loading").hide(),$("#codearea").fadeIn("slow").show(),document.querySelector("#codearea").value=window.atob(window.atob(window.atob(html))),codemirrorEditor=CodeMirror.fromTextArea(document.getElementById("codearea"),{lineNumbers:!0,autoCloseBrackets:!0,matchBrackets:!0,keyMap:"sublime",theme:"material-ocean",matchBrackets:!0,mode:{name:"javascript",startOpen:!0},extraKeys:{"Alt-F":"findPersistent",F11:function(cm){cm.setOption("fullScreen",!cm.getOption("fullScreen"))},Esc:function(cm){cm.getOption("fullScreen")&&cm.setOption("fullScreen",!1)}},indentUnit:4,indentWithTabs:!0,lineWrapping:!0,tabSize:4}),$(".CodeMirror").css({height:`${window.innerHeight-295}px`}),window.addEventListener("resize",(function(event){tinggi=window.innerHeight,$(".CodeMirror").css({height:`${tinggi-295}px`})}),!0)}));var ask=!1;fungsi_simpan=()=>{var btn=$(".btn-simpan-file"),content=btoa(codemirrorEditor.getValue()),path=$(".path_file").val(),folder=$(".path").val(),nama_file=$("#nama_file").val(),password=$(".password").val(),request=new XMLHttpRequest;if(""===password.trim())return toastr.error("Password can't empty!","Warning"),!1;btn.html('<i class="fa fa-circle-o-notch fa-spin"></i>').attr("disabled",!0),request.onload=function(){if(4==this.readyState&&200==this.status){var resp=JSON.parse(this.response);1==resp.status?(ask=!1,toastr.success(resp.response,"Information"),$.post(`${baseurl}?page=detail_file`,{file:path},(function(res){$(".last_updated").html(res)}))):toastr.error(resp.response,"Warning"),btn.html('<i class="fa fa-save"></i>').removeAttr("disabled")}else alert("Target server reached, but it returned an error")},request.onerror=function(){},request.open("POST",baseurl,!0),request.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),request.send("savefile=&folder="+folder+"&nama_file="+nama_file+"&path="+path+"&password="+password+"&content="+encodeURIComponent(content))},$(window).bind("keydown",(function(event){if(event.ctrlKey||event.metaKey)switch(String.fromCharCode(event.which).toLowerCase()){case"s":event.preventDefault(),fungsi_simpan()}"textarea"===event.target.localName&&(ask=!0)})),$(".btn-simpan-file").on("click",(function(e){e.preventDefault(),fungsi_simpan()})),$(".btn-fullscreen").on("click",(function(e){e.preventDefault(),$(".card.editor").addClass("fullscreen");var tinggi=window.innerHeight;$(".CodeMirror").css({height:`${tinggi-85}px`}),window.addEventListener("resize",(function(event){tinggi=window.innerHeight,$(".CodeMirror").css({height:`${tinggi-85}px`})}),!0),$(".btn-fullscreen").hide(),$(".btn-minimize").show()})),$(".btn-minimize").on("click",(function(e){e.preventDefault(),$(".card.editor").removeClass("fullscreen"),$(".btn-fullscreen").show(),$(".btn-minimize").hide(),$(".CodeMirror").css({height:`${window.innerHeight-295}px`}),window.addEventListener("resize",(function(event){tinggi=window.innerHeight,$(".CodeMirror").css({height:`${tinggi-295}px`})}),!0)})),window.onbeforeunload=function(e){if(!0===ask)return(e=e||window.event)&&(e.returnValue="Sure?"),"Sure?"}}if("add"===page&&"file"===type){var codemirrorEditor;codemirrorEditor=CodeMirror.fromTextArea(document.getElementById("codearea"),{lineNumbers:!0,autoCloseBrackets:!0,matchBrackets:!0,keyMap:"sublime",theme:"material-ocean",matchBrackets:!0,mode:{name:"javascript",startOpen:!0},indentUnit:4,indentWithTabs:!0,lineWrapping:!0,tabSize:4,extraKeys:{"Alt-F":"findPersistent",F11:function(cm){cm.setOption("fullScreen",!cm.getOption("fullScreen"))},Esc:function(cm){cm.getOption("fullScreen")&&cm.setOption("fullScreen",!1)}}}),$(".CodeMirror").css({height:`${window.innerHeight-295}px`}),window.addEventListener("resize",(function(event){tinggi=window.innerHeight,$(".CodeMirror").css({height:`${tinggi-295}px`})}),!0);var ask=!1;$(window).bind("keydown",(function(event){ask=!0})),$(".btn-simpan-file").on("click",(function(e){e.preventDefault();var form=new FormData(document.getElementById("form-add-file")),content=codemirrorEditor.getValue();form.append("content",content),form.append("nama_file",document.getElementById("nama_file").value.trim()),$(".btn-simpan-file").html('<i class="fa fa-circle-o-notch fa-spin"></i>').attr("disabled",!0),$.ajax({url:`${baseurl}`,type:"post",data:form,processData:!1,contentType:!1,dataType:"json",success:function(res){!0===res.status?(ask=!1,toastr.success(res.pesan,"Success"),setTimeout(()=>{window.location.href=res.redirect},1e3)):($(".btn-simpan-file").html('<i class="fa fa-save"></i>'),toastr.error(res.pesan,"Warning"))}})})),$(".btn-fullscreen").on("click",(function(e){e.preventDefault(),$(".card.editor").addClass("fullscreen");var tinggi=window.innerHeight;$(".CodeMirror").css({height:`${tinggi-85}px`}),window.addEventListener("resize",(function(event){tinggi=window.innerHeight,$(".CodeMirror").css({height:`${tinggi-85}px`})}),!0),$(".btn-fullscreen").hide(),$(".btn-minimize").show()})),$(".btn-minimize").on("click",(function(e){e.preventDefault(),$(".card.editor").removeClass("fullscreen"),$(".btn-fullscreen").show(),$(".btn-minimize").hide(),$(".CodeMirror").css({height:`${window.innerHeight-295}px`}),window.addEventListener("resize",(function(event){tinggi=window.innerHeight,$(".CodeMirror").css({height:`${tinggi-295}px`})}),!0)})),window.onbeforeunload=function(e){if(!0===ask)return(e=e||window.event)&&(e.returnValue="Sure?"),"Sure?"}}var Modal;$("#login").on("submit",(function(e){e.preventDefault();var data=$(this),label=$(this).find("button").text(),btn=$(this).find("button");btn.html(`<i class="fa fa-circle-o-notch fa-spin"></i> ${label}`).attr("disabled",!0),$.ajax({url:`${baseurl}`,type:"post",data:data.serializeArray(),dataType:"json",success:function(res){!0===res.status?(toastr.success(res.pesan,"Success"),setTimeout(()=>{window.location.reload()},1e3)):(toastr.error(res.pesan,"Warning"),btn.html(`${label}`).removeAttr("disabled"))}})})),btnActionSimpan=()=>{$("button.btn-simpan").on("click",(function(e){e.preventDefault();var data=$("form"),label=$(this).text(),btn=$(this);$(".modal-footer").find("button").attr("disabled",!0),btn.html(`<i class="fa fa-circle-o-notch fa-spin"></i> ${label}`),$.ajax({url:`${baseurl}`,type:"post",data:data.serializeArray(),dataType:"json",success:function(res){!0===res.status?(toastr.success(res.pesan,"Success"),setTimeout(()=>{Modal.close(),loadListDirectory()},1e3)):(toastr.error(res.pesan,"Warning"),btn.html(label),$(".modal-footer").find("button").removeAttr("disabled",!0))},error:function(){toastr.error("Something wrong!","Warning"),btn.html(label),$(".modal-footer").find("button").removeAttr("disabled",!0)}})}))},btnTambahFolder=btn=>{hash=btn.getAttribute("data-hash"),dir=btn.getAttribute("data-dir"),Modal.create("Tambah Folder"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="add_folder">\n\t\t\t\t\t<input type="hidden" name="dir" value="${hash}">\n\t\t\t\t\t<div class="alert alert-warning">Target : <strong>${dir}</strong></div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Folder</label>\n\t\t\t\t\t\t<input type="text" class="form-control" name="nama_folder"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),btnActionSimpan()},btnUbahFolder=btn=>{name=btn.getAttribute("data-name"),dir=btn.getAttribute("data-dir"),Modal.create("Ubah Folder"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="edit_folder">\n\t\t\t\t\t<input type="hidden" name="folder" value="${dir}">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Folder</label>\n\t\t\t\t\t\t<input type="text" class="form-control" name="nama_folder" value="${name}"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),btnActionSimpan()},btnHapusFolder=btn=>{name=btn.getAttribute("data-name"),dir=btn.getAttribute("data-dir"),Modal.create("Hapus Folder"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="delete_folder">\n\t\t\t\t\t<input type="hidden" name="folder" value="${dir}">\n\t\t\t\t\t<div class="alert alert-warning">Anda yakin ingin menghapus folder <strong>${name}</strong> secara permanen?</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),btnActionSimpan()},btnSalinFolder=btn=>{name=btn.getAttribute("data-name"),dir=btn.getAttribute("data-dir"),Modal.create("Salin Folder"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="salin_folder">\n\t\t\t\t\t<input type="hidden" name="folder" value="${dir}">\n\t\t\t\t\t<div class="alert alert-warning">Folder : <strong>${name}</strong></div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Target</label>\n\t\t\t\t\t\t<input type="text" class="form-control" name="target_folder" value="${directory}"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),btnActionSimpan()},btnPindahFolder=btn=>{name=btn.getAttribute("data-name"),dir=btn.getAttribute("data-dir"),Modal.create("Pindah Folder"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="pindah_folder">\n\t\t\t\t\t<input type="hidden" name="folder" value="${dir}">\n\t\t\t\t\t<div class="alert alert-warning">Folder : <strong>${name}</strong></div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Target</label>\n\t\t\t\t\t\t<input type="text" class="form-control" name="target_folder" value="${directory}"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),btnActionSimpan()},btnUbahFile=btn=>{name=btn.getAttribute("data-name"),dir=btn.getAttribute("data-dir"),file=btn.getAttribute("data-file"),Modal.create("Ubah File"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="edit">\n\t\t\t\t\t<input type="hidden" name="path_file" value="${file}">\n\t\t\t\t\t<input type="hidden" name="folder" value="${dir}">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>File</label>\n\t\t\t\t\t\t<input type="text" class="form-control" name="nama_file" value="${name}"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),btnActionSimpan()},btnHapusFile=btn=>{name=btn.getAttribute("data-name"),dir=btn.getAttribute("data-dir"),file=btn.getAttribute("data-file"),Modal.create("Hapus File"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="delete">\n\t\t\t\t\t<input type="hidden" name="path_file" value="${file}">\n\t\t\t\t\t<div class="alert alert-warning">Anda yakin ingin menghapus file <strong>${name}</strong> secara permanen?</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),btnActionSimpan()},btnSalinFile=btn=>{name=btn.getAttribute("data-name"),dir=btn.getAttribute("data-dir"),file=btn.getAttribute("data-file"),Modal.create("Salin File"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="copy">\n\t\t\t\t\t<input type="hidden" name="path_file" value="${file}">\n\t\t\t\t\t<div class="alert alert-warning">File : <strong>${name}</strong></div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Target</label>\n\t\t\t\t\t\t<input type="text" class="form-control" name="target_folder" value="${directory}"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),btnActionSimpan()},btnPindahFile=btn=>{name=btn.getAttribute("data-name"),dir=btn.getAttribute("data-dir"),file=btn.getAttribute("data-file"),Modal.create("Pindah File"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="move">\n\t\t\t\t\t<input type="hidden" name="path_file" value="${file}">\n\t\t\t\t\t<div class="alert alert-warning">File : <strong>${name}</strong></div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Target</label>\n\t\t\t\t\t\t<input type="text" class="form-control" name="target_folder" value="${directory}"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),btnActionSimpan()},btnEkstrakFile=btn=>{name=btn.getAttribute("data-name"),dir=btn.getAttribute("data-dir"),file=btn.getAttribute("data-file"),Modal.create("Ekstrak File"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="ekstrak">\n\t\t\t\t\t<input type="hidden" name="files" value="${file}">\n\t\t\t\t\t<div class="alert alert-warning">File : <strong>${name}</strong></div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Target</label>\n\t\t\t\t\t\t<input type="text" class="form-control" name="target_folder" value="${directory}"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),btnActionSimpan()},btnDownloadFile=btn=>{var _OBJECT_URL,filename;name=btn.getAttribute("data-name"),dir=btn.getAttribute("data-dir"),file=btn.getAttribute("data-file"),Modal.createNoFooter("Download File"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="download">\n\t\t\t\t\t<input type="hidden" id="file" value="${file}">\n\t\t\t\t\t<div class="alert alert-warning">File : <strong>${name}</strong></div>\n\t\t\t\t\t<div class="form-group showpassword">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control password"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<label for="cekzip">\n\t\t\t\t\t<input id="cekzip" type="checkbox" value="0">\n\t\t\t\t\t\tArchive (Zip)\n\t\t\t\t\t</label>\n\t\t\t\t\t<div class="show-download" style="display: none;">\n\t\t\t\t\t\t<a href="" class="btn btn-primary btn-block">Download Manual <small>(Opsi jika file terlalu besar)</small></a>\n\t\t\t\t\t\t<div class="text-center mt-2"><label>atau</label></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type="submit" id="download-button" class="btn btn-primary btn-block">Generate Download</button>\n\t\t\t\t\t<a id="save-file" class="btn btn-primary mt-2" style="display: none;">Save File</a>\n\t\t\t\t\t<button id="btn-back" style="display: none;" class="btn btn-danger btn-block mt-2">Kembali</button>\n\t\t\t\t\t<div class="showprogress" style="display: none;">\n\t\t\t\t\t\t<div class="progress mt-2">\n\t\t\t\t\t\t\t<div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="progress-text text-center"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`);var ask=!1;document.querySelector("#cekzip").addEventListener("click",(function(e){var klik=this;0==this.value?this.value=1:this.value=0})),document.querySelector("#download-button").addEventListener("click",(function(e){e.preventDefault();var password=$(".password").val(),iszip=document.getElementById("cekzip").value,file=document.getElementById("file").value;document.querySelector("#download-button").setAttribute("disabled","disabled"),$.post(`${baseurl}`,{download:"",password:password,iszip:iszip,file:file},(function(res){let parse=JSON.parse(res);if(!0===parse.status){var request=new XMLHttpRequest,startTime=(new Date).getTime();filename=parse.filename,namefile=parse.name,$(".show-download").fadeIn("slow").show(),$(".show-download a").attr("href",filename),request.addEventListener("readystatechange",(function(e){if(2==request.readyState&&200==request.status)document.querySelector("#download-button").style.display="none",document.querySelector("#save-file").style.display="none",document.querySelector(".showpassword").style.display="none",document.querySelector("#btn-back").style.display="none",document.querySelector(".showprogress").style.display="block",document.querySelector("#download-button").setAttribute("disabled","disabled");else if(3==request.readyState);else if(4==request.readyState)try{_OBJECT_URL=URL.createObjectURL(request.response),document.querySelector(".showprogress").style.display="none",document.querySelector("#save-file").setAttribute("href",_OBJECT_URL),document.querySelector("#save-file").setAttribute("download",namefile),document.querySelector("#save-file").style.display="block",document.querySelector(".progress").style.display="none",$.post(`${baseurl}`,{deletefile:"",filename:filename,password:password},(function(res){})),ask=!1,document.querySelector("#btn-back").style.display="block",document.querySelector("#btn-back").addEventListener("click",(function(e){e.preventDefault(),document.querySelector(".show-download").style.display="none",document.querySelector("#btn-back").style.display="none",document.querySelector("#download-button").style.display="block",document.querySelector("#download-button").removeAttribute("disabled"),document.querySelector(".showprogress").style.display="none",document.querySelector("#save-file").style.display="none",document.querySelector(".showpassword").style.display="block",document.querySelector(".password").value=""}))}catch(err){toastr.error(err,"Warning"),document.querySelector("#btn-back").style.display="none",document.querySelector("#download-button").style.display="block",document.querySelector("#download-button").removeAttribute("disabled"),document.querySelector(".showprogress").style.display="none",window.URL.revokeObjectURL(_OBJECT_URL)}})),request.addEventListener("progress",(function(e){var percent_complete=e.loaded/e.total*100,duration=((new Date).getTime()-startTime)/1e3,bps=e.loaded/duration,kbps=bps/1024;kbps=Math.floor(kbps);var time=(e.total-e.loaded)/bps,seconds=time%60,minutes=time/60;seconds=Math.floor(seconds),minutes=Math.floor(minutes),ask=!0,document.querySelector(".progress-bar").style.width=percent_complete+"%",document.querySelector(".progress-bar").innerHTML=parseFloat(percent_complete).toFixed(2)+"%",document.querySelector(".progress-text").innerHTML=convertSpeed(bps)+" / s<br>"+(minutes>0?minutes+" min ":"")+seconds+" sec remaining"})),request.responseType="blob",request.open("get",filename),request.send()}else toastr.error(parse.response,"Warning"),document.querySelector("#download-button").removeAttribute("disabled")}))})),window.onbeforeunload=function(e){if(!0===ask)return(e=e||window.event)&&(e.returnValue="Sure?"),"Sure?"}},btnDownloadBackup=btn=>{var _OBJECT_URL,filename;name=btn.getAttribute("data-name"),size=btn.getAttribute("data-size"),time=btn.getAttribute("data-time"),Modal.createNoFooter("Download File Backup"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="downloadbackup">\n\t\t\t\t\t<div class="alert alert-warning">\n\t\t\t\t\t\tFile : <strong>${name}</strong><br>\n\t\t\t\t\t\tSize : <strong>${size}</strong><br>\n\t\t\t\t\t\tCreated : <strong>${time}</strong>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group showpassword">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control password"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="show-download" style="display: none;">\n\t\t\t\t\t\t<a href="" class="btn btn-primary btn-block">Download Manual <small>(Opsi jika file terlalu besar)</small></a>\n\t\t\t\t\t\t<div class="text-center mt-2"><label>atau</label></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button type="submit" id="download-button" class="btn btn-primary btn-block">Generate Download</button>\n\t\t\t\t\t<a id="save-file" class="btn btn-primary mt-2" style="display: none;">Save File</a>\n\t\t\t\t\t<button id="btn-back" style="display: none;" class="btn btn-danger btn-block mt-2">Kembali</button>\n\t\t\t\t\t<div class="showprogress" style="display: none;">\n\t\t\t\t\t\t<div class="progress mt-2">\n\t\t\t\t\t\t\t<div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="progress-text text-center"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`);var ask=!1;document.querySelector("#download-button").addEventListener("click",(function(e){e.preventDefault();var password=$(".password").val();document.querySelector("#download-button").setAttribute("disabled","disabled"),$.post(`${baseurl}`,{downloadbackup:"",password:password},(function(res){let parse=JSON.parse(res);if(!0===parse.status){var request=new XMLHttpRequest,startTime=(new Date).getTime();filename=parse.filename,namefile=parse.name,$(".show-download").fadeIn("slow").show(),$(".show-download a").attr("href",filename),request.addEventListener("readystatechange",(function(e){if(2==request.readyState&&200==request.status)document.querySelector("#download-button").style.display="none",document.querySelector("#download-button").setAttribute("disabled","disabled"),document.querySelector("#save-file").style.display="none",document.querySelector(".showpassword").style.display="none",document.querySelector("#btn-back").style.display="none",document.querySelector(".showprogress").style.display="block";else if(3==request.readyState);else if(4==request.readyState)try{_OBJECT_URL=URL.createObjectURL(request.response),document.querySelector(".showprogress").style.display="none",document.querySelector("#save-file").setAttribute("href",_OBJECT_URL),document.querySelector("#save-file").setAttribute("download",namefile),document.querySelector("#save-file").style.display="block",document.querySelector(".progress").style.display="none",document.querySelector("#download-button").style.display="none",$.post(`${baseurl}`,{deletefile:"",filename:filename,password:password},(function(res){})),ask=!1,document.querySelector("#btn-back").style.display="block",document.querySelector("#btn-back").addEventListener("click",(function(e){e.preventDefault(),document.querySelector(".show-download").style.display="none",document.querySelector("#btn-back").style.display="none",document.querySelector("#download-button").style.display="block",document.querySelector("#download-button").removeAttribute("disabled"),document.querySelector(".showprogress").style.display="none",document.querySelector("#save-file").style.display="none",document.querySelector(".showpassword").style.display="block",document.querySelector(".password").value=""}))}catch(err){toastr.error(err,"Warning"),document.querySelector("#btn-back").style.display="none",document.querySelector("#download-button").style.display="block",document.querySelector("#download-button").removeAttribute("disabled"),document.querySelector(".showprogress").style.display="none",window.URL.revokeObjectURL(_OBJECT_URL)}})),request.addEventListener("progress",(function(e){var percent_complete=e.loaded/e.total*100,duration=((new Date).getTime()-startTime)/1e3,bps=e.loaded/duration,kbps=bps/1024;kbps=Math.floor(kbps);var time=(e.total-e.loaded)/bps,seconds=time%60,minutes=time/60;seconds=Math.floor(seconds),minutes=Math.floor(minutes),ask=!0,document.querySelector(".progress-bar").style.width=percent_complete+"%",document.querySelector(".progress-bar").innerHTML=parseFloat(percent_complete).toFixed(2)+"%",document.querySelector(".progress-text").innerHTML=convertSpeed(bps)+" / s<br>"+(minutes>0?minutes+" min ":"")+seconds+" sec remaining"})),request.responseType="blob",request.open("get",filename),request.send()}else toastr.error(parse.response,"Warning"),document.querySelector("#download-button").removeAttribute("disabled")}))})),window.onbeforeunload=function(e){if(!0===ask)return(e=e||window.event)&&(e.returnValue="Sure?"),"Sure?"}},btnUploadFile=btn=>{function hideSub(){$("#deleteZip").prop("checked",!1),$("#sub").hasClass("hidden")?$("#sub").removeClass("hidden"):$("#sub").addClass("hidden")}function checkOptions(xpo_){if($("#extractZip").is(":checked")){if($("#deleteZip").is(":checked"))var xpo='{"fileName":"'+xpo_+'","deleteXpo":"true"}';else var xpo='{"fileName":"'+xpo_+'"}';document.querySelector("#submit-btn").innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i> Proses Ekstrak',document.querySelector("#submit-btn").setAttribute("disabled","disabled"),$.ajax({url:baseurl,data:{unzip:"",path:path,Xpo:xpo},method:"POST",success:function(response){"success"==(response=JSON.parse(response)).unzip?toastr.success("Finished"):toastr.error("Uploaded But error occured while extracting","Warning"),document.querySelector("#submit-btn").innerHTML="Upload",document.querySelector("#submit-btn").removeAttribute("disabled")},error:function(response){toastr.error("Failed"),document.querySelector("#submit-btn").innerHTML="Upload",document.querySelector("#submit-btn").removeAttribute("disabled")}})}else toastr.success("Finished"),document.querySelector("#submit-btn").innerHTML="Upload",document.querySelector("#submit-btn").removeAttribute("disabled")}Modal.createNoFooter("Upload File"),Modal.html(`\n\t\t\t\t<div class="alert alert-warning">Target : <strong>${directory}</strong></div>\n\t\t\t\t<form id="formUpload" onsubmit="return false" method="post" enctype="multipart/form-data">\n\t\t\t\t\t<input type="hidden" class="path" value="${directory}">\n\t\t\t\t\t<div class="input-group">\n\t\t\t\t\t\t<label class="input-group-prepend">\n\t\t\t\t\t\t\t<span class="btn btn-primary" style="padding:5px 12px !important;">\n\t\t\t\t\t\t\t\tBrowse<input class="formUpload-file" type="file" name="file" data-name="" data-end="" style="display: none;" multiple>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type="text" class="form-control" style="border-top-left-radius:0 !important;border-bottom-left-radius:0 !important;" readonly>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="detail"></div>\n\t\t\t\t\t<input type="checkbox" name="extractZip" id="extractZip" onclick="hideSub();">&nbsp;Unzip after upload.<br>\n\t\t\t\t\t<span id="sub" class="hidden"><input type="checkbox" name="deleteZip" id="deleteZip">&nbsp;Delete the Zip after extraction.</span>\n\t\t\t\t\t<button id="submit-btn" type="submit" class="btn btn-primary btn-block mt-2">Upload</button>\n\t\t\t\t\t<div id="progress-bar" class="progress mt-2" style="display: none;">\n\t\t\t\t\t\t<div class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="info_size text-center mt-1"></div>\n\t\t\t\t</form>\n\t\t\t`),path=document.querySelector(".path").value,$((function(){$(document).on("change",":file",(function(){var input=$(this),numFiles=input.get(0).files?input.get(0).files.length:1,label=input.val().replace(/\\/g,"/").replace(/.*\//,"");input.trigger("fileselect",[numFiles,label])})),$(document).ready((function(){$(":file").on("fileselect",(function(event,numFiles,label){var input=$(this).parents(".input-group").find(":text"),log=numFiles>1?numFiles+" files selected":label;input.length?input.val(log):log&&alert(log)}))}))})),function(){function support(){var input=document.createElement("input");return input.setAttribute("type","file"),"object"==typeof input.files}function $(id){return document.getElementById(id)}var form,index=0,data_name;if(support()){var BYTES_PER_CHUNK=524288,_files_data=[];form=$("formUpload");var inputs=document.querySelector(".formUpload-file");for(i in inputs)if("object"==typeof inputs&&"file"==inputs.getAttribute("type")){var file_input=inputs;break}function getSlicesCount(blob){var slices;return Math.ceil(blob.size/524288)}function sendRequest(input){var blobs=input.files;async(blobs,0,blobs.length)}function async(blobs,i,length){if(i>=length)return form.reset(),_files_data=[],!1;var index=_files_data["data-start"];void 0===index&&(index=0),index>0&&index++;for(var start=0,j=0;j<index;j++){var start;(start=start+524288)>blobs[i].size&&(start=blobs[i].size)}document.querySelector("#submit-btn").innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i> Proses Upload',document.querySelector("#submit-btn").setAttribute("disabled","disabled"),uploadFile(blobs[i],index,start,_files_data["data-end"],_files_data["data-size"],(function(){i++,async(blobs,i,length)}))}form.reset(),form.onsubmit=function(e){e.preventDefault(),sendRequest(file_input,this)},file_input.onchange=function(e){var target,files=(e.target?e.target:e.srcElement).files;for(var i in files)if("object"==typeof files[i]){var found=!1,lis=document.querySelector(".formUpload-file");if(lis.setAttribute("data-name",files[i].name),lis.setAttribute("data-end",getSlicesCount(files[i])),"function"==typeof lis.getAttribute){data_name=lis.getAttribute("data-name"),Data_name=data_name;var slices=getSlicesCount(files[i]);if(data_name==files[i].name&&slices==lis.getAttribute("data-end")){var tmp={"data-start":lis.getAttribute("data-start"),"data-end":lis.getAttribute("data-end"),"data-size":files[i].size};_files_data=tmp,found=!0}}if(!1===found){var tmp={"data-start":0,"data-end":getSlicesCount(files[i]),"data-size":0};_files_data=tmp}}};var str2ab_blobreader=function(str,callback){var blob,BlobBuilder=window.MozBlobBuilder||window.WebKitBlobBuilder||window.BlobBuilder;if(void 0!==BlobBuilder){var bb=new BlobBuilder;bb.append(str),blob=bb.getBlob()}else blob=new Blob([str]);var f=new FileReader;f.onload=function(e){var target=e.target?e.target:e.srcElement;callback(target.result)},f.readAsArrayBuffer(blob)};function uploadFile(blob,index,start,slicesTotal,filesizes,callback){if(void 0!==blob){void 0===index&&(console.log("index:: "+index),index=0,console.log("index:: "+index));var end=start+524288;end>blob.size&&(end=blob.size),getChunk(blob,start,end,(function(zati){var reader=new FileReader,ask=!0;reader.onload=function(e){for(var target=e.target?e.target:e.srcElement,binary="",bytes=new Uint8Array(target.result),length=bytes.byteLength,i=0;i<length;i++)binary+=String.fromCharCode(bytes[i]);var hash=md5(binary);binary=void 0;var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(4==xhr.readyState){console.log(xhr.response);var j=JSON.parse(xhr.response);if(void 0!==typeof j.response&&!0!==j.response)return toastr.error(j.response,"Warning"),!1;if(void 0!==typeof j.error&&"E_HASH"===j.error)window.setTimeout((function(){uploadFile(blob,index,start,slicesTotal,filesizes,callback)}),1e3);else{var progress_bar=$("progress-bar");document.querySelector("#progress-bar").style.display="flex",document.querySelector(".progress-bar").style.width=parseInt(j.percent)+"%",document.querySelector(".progress-bar").innerHTML=parseInt(j.percent)+"%",document.querySelector(".info_size").innerHTML=`<span>File : ${j.filename}<br>Terupload ${formatFileSize(j.upload_size)} dari ${formatFileSize(j.total_size)}</span>`,window.onbeforeunload=function(e){if(!0===ask)return(e=e||window.event)&&(e.returnValue="Sure?"),"Sure?"},100===j.percent&&(loadListDirectory(),console.log("Finished"),ask=!1,hideSub(),checkOptions(data_name)),++index<slicesTotal?window.setTimeout((function(){uploadFile(blob,index,end,slicesTotal,filesizes,callback)}),100):callback()}}},void 0!==index&&null!=index||(console.log("index:: "+index),index=0,console.log("index:: "+index)),xhr.open("post",baseurl+"?page=upload",!0),xhr.setRequestHeader("X-File-Name",blob.name),xhr.setRequestHeader("X-Index",index),xhr.setRequestHeader("X-Total",slicesTotal),xhr.setRequestHeader("X-Hash",hash),xhr.setRequestHeader("X-Path",path),xhr.setRequestHeader("X-Size",filesizes),xhr.send(zati)},reader.readAsArrayBuffer(zati)}))}else console.log("stop")}function getChunk(blob,start,end,callback){var chunk;chunk=blob.webkitSlice?blob.webkitSlice(start,end):blob.mozSlice?blob.mozSlice(start,end):blob.slice(start,end),blob.webkitSlice?str2ab_blobreader(chunk,(function(buf){callback(buf)})):callback(chunk)}}else window.onload=function(){form=$("formUpload");var inputs=document.querySelector(".formUpload-file");form.reset(),form.onsubmit=function(e){var img=document.createElement("img");img.setAttribute("src","loading.gif"),img.setAttribute("alt","loading"),this.appendChild(img)},file_input.onchange=function(e){var name="File selected",target;void 0!==typeof e&&(e.preventDefault(),name=(e.target?e.target:e.srcElement).value||"File selected");for(var toupload,ul=document.getElementById("toupload").getElementsByTagName("ul")[0];ul.hasChildNodes();)ul.removeChild(ul.firstChild);var li=document.createElement("li");li.appendChild(document.createTextNode(name)),ul.appendChild(li)}}}()},$(".btn-copy").on("click",(function(e){if(e.preventDefault(),files=[],files_hash=[],$(".cekfiles").each((function(){!0===$(this).is(":checked")&&(files.push($(this).val()),files_hash.push($(this).data("hash")))})),0===files.length)return toastr.error("Belum ada file yang dipilih!","Warning"),!1;list_folder="",list_folder+="<strong>List folder&file : </strong>",list_folder+='<ul class="mb-0">',files.forEach(value=>{list_folder+=`<li>${value}</li>`}),list_folder+="</ul>",Modal.create("Salin Folder&File"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="copy_masal">\n\t\t\t\t\t<input type="hidden" name="files" value="${files_hash.join("@")}">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<div class="alert alert-warning">\n\t\t\t\t\t\t\t${list_folder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Target</label>\n\t\t\t\t\t\t<input type="text" class="form-control" name="target_folder" value="${directory}"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),btnActionSimpan()})),$(".btn-move").on("click",(function(e){return e.preventDefault(),files=[],$(".cekfiles").each((function(){!0===$(this).is(":checked")&&files.push($(this).val())})),0===files.length?(toastr.error("Belum ada file yang dipilih!","Warning"),!1):(e.preventDefault(),files=[],files_hash=[],$(".cekfiles").each((function(){!0===$(this).is(":checked")&&(files.push($(this).val()),files_hash.push($(this).data("hash")))})),0===files.length?(toastr.error("Belum ada file yang dipilih!","Warning"),!1):(list_folder="",list_folder+="<strong>List folder&file : </strong>",list_folder+='<ul class="mb-0">',files.forEach(value=>{list_folder+=`<li>${value}</li>`}),list_folder+="</ul>",Modal.create("Pindah Folder&File"),Modal.html(`\n\t\t\t\t<form>\n\t\t\t\t\t<input type="hidden" name="pindah_masal">\n\t\t\t\t\t<input type="hidden" name="files" value="${files_hash.join("@")}">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<div class="alert alert-warning">\n\t\t\t\t\t\t\t${list_folder}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Target</label>\n\t\t\t\t\t\t<input type="text" class="form-control" name="target_folder" value="${directory}"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label>Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="password"/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t`),void btnActionSimpan()))})),btnPetunjuk=()=>{Modal.createNoFooter("Petunjuk","modal-md"),Modal.html('<dl style="font-size: 12px;margin-bottom:0 !important">\n\t\t\t\t\t\t\t<dt>Ctrl-F / Cmd-F</dt><dd>Start searching</dd>\n\t\t\t\t\t\t\t<dt>Ctrl-G / Cmd-G</dt><dd>Find next</dd>\n\t\t\t\t\t\t\t<dt>Shift-Ctrl-G / Shift-Cmd-G</dt><dd>Find previous</dd>\n\t\t\t\t\t\t\t<dt>Shift-Ctrl-F / Cmd-Option-F</dt><dd>Replace</dd>\n\t\t\t\t\t\t\t<dt>Shift-Ctrl-R / Shift-Cmd-Option-F</dt><dd>Replace all</dd>\n\t\t\t\t\t\t\t<dt>Alt-F</dt><dd>Persistent search (dialog doesn\'t autoclose,\n\t\t\t\t\t\t\tenter to find next, Shift-Enter to find previous)</dd>\n\t\t\t\t\t\t\t<dt>Alt-G</dt><dd>Jump to line</dd>\n\t\t\t\t\t\t\t<dt>F11</dt><dd>Fullscreen</dd>\n\t\t\t\t\t\t</dl>')},(Modal=window.Modal||{}).create=function(modaltitle,ukuran="modal-lg",headerbg=""){var data=`<div class="modal fade fadeIn" id="modal" data-keyboard="false" data-backdrop="static">\n\t\t\t\t\t\t\t<div class="modal-dialog  ${ukuran}">\n\t\t\t\t\t\t\t\t<div class="modal-content">\n\t\t\t\t\t\t\t\t\t<div class="modal-header  ${headerbg}">\n\t\t\t\t\t\t\t\t\t\t\x3c!--<button type="button" class="close" data-dismiss="modal" aria-label="Close"> <i class="fa fa-close fa-1x"></i> </button>--\x3e\n\t\t\t\t\t\t\t\t\t\t<strong class="modal-title" id="myModalLabel"> ${modaltitle} </strong>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="modal-data" class="modal-body"></div>\n\t\t\t\t\t\t\t\t\t<div class="modal-footer">\n\t\t\t\t\t\t\t\t\t\t<button type="button" data-dismiss="modal" class="btn btn-danger btn-sm">Cancel</button>\n\t\t\t\t\t\t\t\t\t\t<button type="button" class="btn btn-primary btn-sm btn-simpan">Submit</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`;$("body").append(data),$("#modal").modal("show"),$("#modal-data").html('<div style="text-align:center">Sedang memuat...</div>')},Modal.createNoFooter=function(modaltitle,ukuran="modal-lg",headerbg=""){var data=`<div class="modal fade fadeIn" id="modal" data-keyboard="false" data-backdrop="static">\n\t\t\t\t\t\t\t<div class="modal-dialog  ${ukuran}">\n\t\t\t\t\t\t\t\t<div class="modal-content">\n\t\t\t\t\t\t\t\t\t<div class="modal-header  ${headerbg}">\n\t\t\t\t\t\t\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close"> <i class="fa fa-close fa-1x"></i> </button>\n\t\t\t\t\t\t\t\t\t\t<strong class="modal-title" id="myModalLabel"> ${modaltitle} </strong>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div id="modal-data" class="modal-body"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>`;$("body").append(data),$("#modal").modal("show"),$("#modal-data").html('<div style="text-align:center">Sedang memuat...</div>')},Modal.html=data=>{$("#modal-data").html(data)},Modal.close=()=>{$(".modal-body").html(""),$("#modal").modal("hide"),$(".modal-backdrop").remove()},$("body").on("hidden.bs.modal",(function(){$("#modal").remove()}));